# 워크플로우 가이드

이 문서는 프로젝트의 개발 워크플로우를 정의합니다.

---

## 브랜치 전략

### 규칙

- `main` 브랜치에는 직접 푸시하지 않는다.
- 모든 변경은 별도 브랜치를 만들어 PR로 병합한다.
- 브랜치 이름은 `<접두사>/<설명>` 형식을 사용한다.

### 접두사

| 접두사 | 용도 | 예시 |
|---|---|---|
| `feature/` | 새 기능 구현 | `feature/battle-system` |
| `fix/` | 버그 수정 | `fix/damage-calculation` |
| `docs/` | 문서 작업 | `docs/workflow-setup` |
| `refactor/` | 리팩터링 | `refactor/state-structure` |
| `chore/` | 설정, 의존성, CI 등 | `chore/initial-scaffolding` |

### 작업 흐름

```
1. main에서 브랜치 생성
2. 작업 수행 (작은 의미 단위로 커밋)
3. PR 생성
4. 셀프 코드 리뷰
5. CI 통과 확인
6. main에 squash merge로 병합
```

---

## PR 작성 가이드

### 제목

- 변경 내용을 한 문장으로 요약
- 예: "전투 시스템 기본 로직 구현", "세팅 폼 3단계 스텝 구현"

### 본문 구조

PR 본문은 처음 보는 사람도 이해할 수 있도록 작성한다.

- **요약**: 이 PR이 무엇을 변경하는지 1-3줄로 설명
- **변경 사항**: 구체적인 변경 목록 (파일/기능 단위)
- **테스트 계획**: 어떻게 검증했는지, 어떤 테스트를 추가했는지
- **스크린샷**: UI 변경이 있을 경우 전/후 비교 (해당하는 경우)

### 병합 방식

- **squash merge**를 기본으로 사용한다.
- PR 내 여러 커밋이 하나의 커밋으로 합쳐져 main 히스토리가 깔끔하게 유지된다.

PR 본문은 `.github/PULL_REQUEST_TEMPLATE.md` 템플릿을 따른다.

---

## 코드 리뷰 체크리스트

PR 생성 후 셀프 코드 리뷰를 수행한다. 아래 관점에서 검토하고, 리뷰 댓글을 PR에 작성한다.

### 가독성

- [ ] 코드가 의도를 명확히 전달하는가
- [ ] 변수/함수 이름이 적절한가
- [ ] 불필요한 복잡성이 없는가

### 재사용성

- [ ] 중복 코드가 없는가
- [ ] 적절한 수준의 추상화가 이루어졌는가 (과도한 추상화도 문제)

### 효율성

- [ ] 불필요한 연산이나 렌더링이 없는가
- [ ] 적절한 자료구조를 사용하고 있는가

### 보안

- [ ] 사용자 입력이 적절히 검증되는가
- [ ] 민감 정보가 노출되지 않는가

### 버그 가능성

- [ ] 엣지 케이스를 처리하고 있는가
- [ ] 타입 안전성이 보장되는가
- [ ] null/undefined 처리가 적절한가

### 안정성

- [ ] 에러 상황에서 적절히 대응하는가
- [ ] 테스트가 충분히 작성되었는가

---

## 커밋 메시지 규칙

- 한국어로 작성
- 작은 의미 단위로 커밋
- 예시:
  - `세팅 폼 Step 1 이름 입력 구현`
  - `데미지 계산 공식 적용`
  - `vitest 설정 및 샘플 테스트 추가`

### 지양할 패턴

- 작업을 모두 완료한 후 레이어별로 기계적으로 분할하는 커밋 (예: "타입 정의", "유틸 함수", "컴포넌트", "스타일")
- 의미가 불분명한 메시지 (예: "수정", "업데이트", "WIP")

---

## CI 자동 검증

GitHub Actions로 모든 PR에 대해 자동 검증을 수행할 예정입니다.

검증 항목:
- **lint**: biome check (코드 스타일, 잠재적 문제)
- **test**: vitest run (단위 테스트, 통합 테스트)
- **build**: vite build (빌드 성공 여부)

> CI 워크플로우 파일(`.github/workflows/ci.yml`)은 프로젝트 초기 설정 후 구현 예정
